graph TB
%% User Devices Layer
subgraph UserDevices["ğŸŒ User Devices (5G Connected)"]
Mobile["ğŸ“±<br/>Mobile Apps"]
IoT["ğŸ”§<br/>IoT Sensors"]
Gaming["ğŸ®<br/>Gaming Clients"]
Vehicles["ğŸš—<br/>Autonomous Vehicles"]
end

    %% MEC Site A (Radio Tower 1)
    subgraph MECSiteA["ğŸ“¡ MEC Site A (5G Radio Tower 1)"]
        subgraph AgentsA["ğŸ¤– Complete Strands Agent Set"]
            OrchestratorA["ğŸ¯<br/>Orchestrator Agent"]
            LoadBalancerA["âš–ï¸<br/>Load Balancer Agent"]
            ResourceMonitorA["ğŸ“ˆ<br/>Resource Monitor Agent"]
            DecisionCoordA["ğŸ§ <br/>Decision Coordinator Agent"]
            CacheManagerA["ğŸ’¾<br/>Cache Manager Agent"]
        end

        subgraph MCPToolsA["ğŸ› ï¸ Local MCP Tools"]
            MetricsA["ğŸ“Š<br/>metrics_monitor"]
            ContainerA["ğŸ³<br/>container_ops"]
            InferenceA["ğŸ§ <br/>inference_engine"]
            TelemetryA["ğŸ“<br/>telemetry_logger"]
            MemorySyncA["ğŸ”„<br/>memory_sync"]
        end

        subgraph ComputeA["ğŸ’» Local Edge Compute"]
            ContainersA["ğŸ“¦<br/>Containers"]
            CacheStorageA["ğŸ’½<br/>Model Cache"]
        end
    end

    %% MEC Site B (Radio Tower 2)
    subgraph MECSiteB["ğŸ“¡ MEC Site B (5G Radio Tower 2)"]
        subgraph AgentsB["ğŸ¤– Complete Strands Agent Set"]
            OrchestratorB["ğŸ¯<br/>Orchestrator Agent"]
            LoadBalancerB["âš–ï¸<br/>Load Balancer Agent"]
            ResourceMonitorB["ğŸ“ˆ<br/>Resource Monitor Agent"]
            DecisionCoordB["ğŸ§ <br/>Decision Coordinator Agent"]
            CacheManagerB["ğŸ’¾<br/>Cache Manager Agent"]
        end

        subgraph MCPToolsB["ğŸ› ï¸ Local MCP Tools"]
            MetricsB["ğŸ“Š<br/>metrics_monitor"]
            ContainerB["ğŸ³<br/>container_ops"]
            InferenceB["ğŸ§ <br/>inference_engine"]
            TelemetryB["ğŸ“<br/>telemetry_logger"]
            MemorySyncB["ğŸ”„<br/>memory_sync"]
        end

        subgraph ComputeB["ğŸ’» Local Edge Compute"]
            ContainersB["ğŸ“¦<br/>Containers"]
            CacheStorageB["ğŸ’½<br/>Model Cache"]
        end
    end

    %% AWS Cloud Layer (Only 2 AgentCore Services)
    subgraph AWSCloud["â˜ï¸ AWS Cloud (Passive Observer)"]
        AgentCoreMemory["â¬œ<br/>Bedrock AgentCore<br/>Memory<br/>(Swarm State Storage)"]
        AgentCoreOrchestration["â¬œ<br/>Bedrock AgentCore<br/>Orchestration<br/>(Agent Coordination)"]
    end

    %% MEC Site C (Radio Tower 3)
    subgraph MECSiteC["ğŸ“¡ MEC Site C (5G Radio Tower 3)"]
        subgraph AgentsC["ğŸ¤– Complete Strands Agent Set"]
            OrchestratorC["ğŸ¯<br/>Orchestrator Agent"]
            LoadBalancerC["âš–ï¸<br/>Load Balancer Agent"]
            ResourceMonitorC["ğŸ“ˆ<br/>Resource Monitor Agent"]
            DecisionCoordC["ğŸ§ <br/>Decision Coordinator Agent"]
            CacheManagerC["ğŸ’¾<br/>Cache Manager Agent"]
        end

        subgraph MCPToolsC["ğŸ› ï¸ Local MCP Tools"]
            MetricsC["ğŸ“Š<br/>metrics_monitor"]
            ContainerC["ï¿½<br/>ccontainer_ops"]
            InferenceC["ğŸ§ <br/>inference_engine"]
            TelemetryC["ğŸ“<br/>telemetry_logger"]
            MemorySyncC["ğŸ”„<br/>memory_sync"]
        end

        subgraph ComputeC["ğŸ’» Local Edge Compute"]
            ContainersC["ğŸ“¦<br/>Containers"]
            CacheStorageC["ğŸ’½<br/>Model Cache"]
        end
    end

    %% User Device to MEC Site A Primary Site
    Mobile == "5G Request" ==> OrchestratorA
    IoT  == "5G Sensor Data" ==> OrchestratorA
    Gaming  == "5G Game State" ==> OrchestratorA
    Vehicles  == "5G Navigation" ==> OrchestratorA


    %% Agents Use Local MCP Tools (Within Same MEC Site)
    OrchestratorA --> MetricsA
    LoadBalancerA --> ContainerA
    ResourceMonitorA --> TelemetryA
    DecisionCoordA --> MemorySyncA
    CacheManagerA --> InferenceA

    OrchestratorB --> MetricsB
    LoadBalancerB --> ContainerB
    ResourceMonitorB --> TelemetryB
    DecisionCoordB --> MemorySyncB
    CacheManagerB --> InferenceB

    OrchestratorC --> MetricsC
    LoadBalancerC --> ContainerC
    ResourceMonitorC --> TelemetryC
    DecisionCoordC --> MemorySyncC
    CacheManagerC --> InferenceC

    %% MCP Tools Interact with Local Compute
    ContainerA --> ContainersA
    InferenceA --> CacheStorageA
    MetricsA --> ContainersA

    ContainerB --> ContainersB
    InferenceB --> CacheStorageB
    MetricsB --> ContainersB

    ContainerC --> ContainersC
    InferenceC --> CacheStorageC
    MetricsC --> ContainersC

    %% Swarm Coordination Only when triggered by Site A
    DecisionCoordA -.-> DecisionCoordB
    DecisionCoordA -.-> DecisionCoordC

    %% MEC Sites to AWS Cloud Only 2 AgentCore Services
    MemorySyncA -.-> AgentCoreMemory
    DecisionCoordA -.-> AgentCoreOrchestration

    %% Invisible positioning connections to control layout
    MECSiteA ~~~ AWSCloud

    %% Styling
    classDef userStyle fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef mecAStyle fill:#e3f2fd,stroke:#2196f3,stroke-width:2px
    classDef mecBStyle fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef mecCStyle fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef cloudStyle fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    classDef agentStyle fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef toolStyle fill:#f1f8e9,stroke:#689f38,stroke-width:2px

    class UserDevices,Mobile,IoT,Gaming,Vehicles userStyle
    class MECSiteA,AgentsA,MCPToolsA,ComputeA,ContainersA,CacheStorageA mecAStyle
    class MECSiteB,AgentsB,MCPToolsB,ComputeB,ContainersB,CacheStorageB mecBStyle
    class MECSiteC,AgentsC,MCPToolsC,ComputeC,ContainersC,CacheStorageC mecCStyle
    class AWSCloud,AgentCoreMemory,AgentCoreOrchestration cloudStyle
    class OrchestratorA,LoadBalancerA,ResourceMonitorA,DecisionCoordA,CacheManagerA,OrchestratorB,LoadBalancerB,ResourceMonitorB,DecisionCoordB,CacheManagerB,OrchestratorC,LoadBalancerC,ResourceMonitorC,DecisionCoordC,CacheManagerC agentStyle
    class MetricsA,ContainerA,InferenceA,TelemetryA,MemorySyncA,MetricsB,ContainerB,InferenceB,TelemetryB,MemorySyncB,MetricsC,ContainerC,InferenceC,TelemetryC,MemorySyncC toolStyle
